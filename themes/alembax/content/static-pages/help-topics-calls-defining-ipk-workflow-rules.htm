[viewBag]
title = "Defining IPK Workflow Rules"
url = "/help/topics/calls/defining-ipk-workflow-rules"
layout = "help"
is_hidden = 0
navigation_hidden = 0
==
                                                    <h1>
<a name="aanchor217"></a>
                                                        <concept term="IPK"></concept>Defining IPK Workflow Rules</h1>
                                                    <p>You can define rules based on selected call attributes, and link the rules to different workflows. </p>
                                                    <h2 class="Prerequisite">Before you start</h2>
                                                    <p class="prereqtext1">The following settings must be in place before you can build a rule:</p>
                                                    <ul class="prereq">
                                                        <li value="1">
<b>IPK Workflow Rules Builder</b> must be enabled in <a href="../admin%20ipk%20management/ipk%20settings.htm">IPK Settings</a> .</li>
                                                        <li value="2">I<b>PK Workflow</b> must be selected in the <a href="../admin%20security%20roles/ipk%20management%20security%20roles%20-%20options%20tab.htm" class="MCXref xref">IPK Management Role: Options Tab</a> of your <b>IPK Management Security Role</b>.</li>
                                                    </ul>
                                                    <ol>
                                                        <li value="1">Select <b>Menu</b> and then <b>Admin</b>. From the submenu, select <b>IPK Workflow Rules</b>. The <b>IPK Workflow Rules</b> window appears.  The explorer pane on the left of this window shows three groups: <b>IPK Workflow Rules</b>, <b>Forum Management</b> and <b>Auto Close Configuration</b>.</li>
                                                        <li value="2">From the <b>IPK Workflow Rules</b> group, select <b>IPK Rules to Workflow Mapping</b>. </li>
                                                        <li value="3">The <b>IPK Rules to Workflow Mapping</b> window appears. It lists all the rules defined earlier. </li>
                                                        <li value="4">To add a new workflow, click <img src="/storage/app/media/Help/images/add%20new.png">. </li>
                                                        <li value="5">In the <b>Workflow Criteria Rules</b> window, <a href="defining%20workflow%20criteria.htm">define the conditions to include in the rule</a>. </li>
                                                        <li value="6">After you have defined the rule and are back in the <b>IPK Rules to Workflow Mapping</b> window, you can link the workflows to be run when this rule is applied. Select the rule and then complete the details.</li>
                                                        <p>
                                                            </p>
<table class="TableStyle-FieldDesc" style="mc-table-style: url('../../resources/tablestyles/fielddesc.css');margin-left: 0;margin-right: auto;" cellspacing="0">
                                                                <col class="TableStyle-FieldDesc-Column-Column1">
                                                                <col class="TableStyle-FieldDesc-Column-Column2">
                                                                <tbody>
                                                                    <tr>
                                                                        <td class="TableStyle-FieldDesc-BodyH-Column1-">Assignment Workflow</td>
                                                                        <td class="TableStyle-FieldDesc-BodyG-Column2-">
                                                                            <p> Select the assignment workflow that you want to link.</p>
                                                                            <p class="note">It is not mandatory to link all types of workflow to a rule.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="TableStyle-FieldDesc-BodyH-Column1-">Request Workflow</td>
                                                                        <td class="TableStyle-FieldDesc-BodyG-Column2-">
                                                                            <p>Select the request workflow that you want to link.</p>
                                                                            <p class="note">It is not mandatory to link all types of workflow to a rule.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="TableStyle-FieldDesc-BodyH-Column1-">Notification Workflow</td>
                                                                        <td class="TableStyle-FieldDesc-BodyG-Column2-">
                                                                            <p> Select the notification workflow that you want to link.</p>
                                                                            <p class="note">It is not mandatory to link all types of workflow to a rule.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="TableStyle-FieldDesc-BodyH-Column1-">Forum Workflow</td>
                                                                        <td class="TableStyle-FieldDesc-BodyG-Column2-">
                                                                            <p> Select the forum workflow that you want to link.</p>
                                                                            <p class="note">It is not mandatory to link all types of workflow to a rule.</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="TableStyle-FieldDesc-BodyH-Column1-">Continue</td>
                                                                        <td class="TableStyle-FieldDesc-BodyG-Column2-">
                                                                            <p>Select the checkbox to enable the system to find the next applicable IPK rule on a call (after this one has been picked up). This will store the actions to be executed from the workflows mapped to this rule, and then evaluate the next IPK workflow rule in the list.</p>
                                                                            <div class="MCDropDown MCDropDown_Closed dropDown">
<span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="/storage/app/media/Help/images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open">The Continue option on the IPK Rules to Workflow Mapping window lets you configure your system so that it can run more than one IPK Workflow rule on a call.</a></span>
                                                                                <div class="MCDropDownBody dropDownBody">
                                                                                    <p>If the call fields match the criteria on an IPK Workflow rule, the workflows that have been mapped to this rule will be stored by the system to be processed. If the Continue option is also selected for this IPK Workflow rule, the system will continue to evaluate the IPK Workflow rules in the list. If the system finds another IPK Workflow rule whose criteria matches the call fields, this next IPK Workflow rule will also be picked up and the workflows mapped to this rule will also be stored by the system to be processed. If this next IPK Workflow rule also has the Continue option selected, the system will once again continue and evaluate the next IPK Workflow rule in the list.</p>
                                                                                    <p>The system will only stop looking for matching IPK Workflow rules when:</p>
                                                                                    <ul style="list-style-type: disc;margin-left: 90pt;">
                                                                                        <li style="list-style-type: disc;" value="1">the last IPK Workflow rule does not have the Continue option selected, or</li>
                                                                                    </ul>
                                                                                    <ul style="list-style-type: disc;margin-left: 90pt;">
                                                                                        <li style="list-style-type: disc;" value="1">there are no more matching IPK Workflow rules.</li>
                                                                                    </ul>
                                                                                    <p>Once all the IPK Workflow rules have been picked up, the workflows mapped to these rules will be run. This means that two of the same type of workflows (Assignment, Forum, Notification, and Request) can be run on a call, <a href="running%20multiple%20workflow.htm">in a predefined order</a>.</p>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="TableStyle-FieldDesc-BodyH-Column1-">Cancel</td>
                                                                        <td class="TableStyle-FieldDesc-BodyG-Column2-">
                                                                            <p>
                                Select the checkbox to enable the system to cancel all workflows when this rule is overridden. Selecting this option means that when an assignment workflow is overridden through the IPK Workflow Rules Found dialog box, then the assignment workflow and any other matching workflows picked up at the time will not be run. Clearing this option means that the other matching workflows will still be run even if the analyst overrides the assignment workflow.
</p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="TableStyle-FieldDesc-BodyB-Column1-">Autorun</td>
                                                                        <td class="TableStyle-FieldDesc-BodyA-Column2-">
                                                                            <p class="prereq"><b>Auto Run Rules</b> must be cleared in the <a href="../admin%20ipk%20management/ipk%20settings.htm">IPK Settings window</a> to enable this checkbox.</p>
                                                                            <div class="MCDropDown MCDropDown_Closed dropDown">
<span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="/storage/app/media/Help/images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open">Select the checkbox to enable the rule to run automatically when the conditions defined in the rule are met.</a></span>
                                                                                <div class="MCDropDownBody dropDownBody">
                                                                                    <p>The <b>Autorun</b> option only applies to assignment workflows mapped to an IPK rule. Any other workflows (that is, notification, forum, and create request) mapped to an IPK rule that is picked up will always be run.</p>
                                                                                    <p>If <b>Auto Run</b> is enabled (that is, if <b>Auto Run Rules</b> is selected in the IPK Settings or <b>Auto Run</b> is selected when the rule is created) the system will automatically try to run the rule against a call. The message “A workflow rule has been found. This rule will now be run.” appears. If you click <b>OK</b>, the rule is run. If you click <b>Cancel</b>, the Call Details window appears. When you try to forward or defer the call, the system will try to run the rule again. Because Auto Run is enabled, you will not be able to stop the rule from being applied.</p>
                                                                                    <p>If the Auto Run feature is not enabled, the following message appears before a rule is run: “A workflow rule has been found. Do you wish to run this rule?” Clicking Yes will run the rule. Clicking <b>Cancel</b> will display the Call Details window where you can update the call. Clicking No will override the rule. The call history is updated to indicate that a rule was found, but it was overridden. </p>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        
                                                        <li value="7">Click <img src="/storage/app/media/Help/images/save%20button.png">. </li>
                                                        <li value="8">To delete an IPK Workflow Rule, select the rule you want to delete, and click <img src="/storage/app/media/Help/images/delete%20button.png"> . Confirm the deletion.</li>
                                                    </ol>
                                                    <h3>In what order are rules applied?</h3>
                                                    <p>When a call is logged, <span class="GeneralVariablesProductName">ASM</span> checks the information in various call fields to determine whether an IPK Workflow Rule is to be applied. </p>
                                                    <ul>
                                                        <li style="list-style-type: disc;" value="1">If it finds such a condition (say priority set to a particular value), it checks the rules defined. The first rule that matches the condition is applied to the call. This rule is picked up from the IPK Rule Mapping window. </li>
                                                        <li style="list-style-type: disc;" value="2">If there are rules listed before this rule that do not match the condition, they are ignored. When the match is found, the application stops its search at that point unless the Continue option has been selected for this rule. </li>
                                                        <li style="list-style-type: disc;" value="3">If the Continue option is selected on a matching rule, the system will store all the actions defined on the workflows mapped to the rule, and continue to evaluate the next IPK Workflow rule in the list. </li>
                                                        <li style="list-style-type: disc;" value="4">The system will stop its search when a rule picked up does not have the Continue checkbox selected, or reaches the end of the IPK Workflow rule list.</li>
                                                    </ul>
                                                    <p class="warning">If two or more IPK Workflow Rules have been picked up on a call and both have the same type of workflow mapped (that is, Assignment workflows, Forum workflows, Notification workflows and/or Request workflows), you must be aware of <a href="running%20multiple%20workflow.htm">which workflow will actually be run</a>.</p>
                                                    <p>You can change the order of the rules by using the <img src="/storage/app/media/Help/images/move%20up.png">, <img src="/storage/app/media/Help/images/move%20down.png">, <img src="/storage/app/media/Help/images/move%20top.png"> and <img src="/storage/app/media/Help/images/move%20bottom.png"> buttons. </p>
                                                    <p class="warning">For a new call, an IPK rule that defines its conditions on agreement related items will be evaluated only at the next action taken on the call. For example, for an IPK rule that initiates a forum workflow when the OLA Agreement of the call is equal to a given value, the forum is only linked to the call when the user saves and then defers the new call. The forum will not be linked to the call when the user simply defers the call. </p>
                                                    <p class="note">A rule will not be applied unless at least one workflow is linked to the rule.</p>
                                                